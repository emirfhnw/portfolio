{% extends "portfolio/base.html" %}
{% load static %}
{% block title %}Projekte · Portfolio{% endblock %}

{% block content %}
<section class="section">
  <header class="section-head">
    <h1>Projekte</h1>
    <p class="muted">Datenanalyse, Visualisierung und Webapps mit sauberer Struktur.</p>
  </header>

  <div class="grid cards">
    {% for p in projects %}
      <article class="card">
        <div class="project-media">
          {% if p.cover_image %}
            <img src="{{ p.cover_image.url }}" alt="{{ p.title }}">
          {% else %}
            <img src="{% static 'img/placeholder.png' %}" alt="{{ p.title }}">
          {% endif %}
        </div>
        <div class="project-body">
          <h2 class="project-title"><a href="{% url 'project_detail' p.slug %}">{{ p.title }}</a></h2>
          <p class="project-desc">{{ p.short_description }}</p>
        </div>
        <div class="project-meta">
          <div>
            {% if p.featured %}<span class="tag good">Featured</span>{% endif %}
            {% if p.tech_stack %}<span class="tag blue">{{ p.tech_stack }}</span>{% endif %}
          </div>
          <a class="link" href="{% url 'project_detail' p.slug %}">Details</a>
        </div>
      </article>
    {% empty %}
      <p class="muted">Noch keine Projekte vorhanden.</p>
    {% endfor %}
  </div>

  {% if is_paginated %}
    <nav class="pagination" aria-label="Seitennavigation">
      {% if page_obj.has_previous %}
        <a class="btn" href="?page={{ page_obj.previous_page_number }}">Zurück</a>
      {% endif %}
      <span class="muted">Seite {{ page_obj.number }} von {{ page_obj.paginator.num_pages }}</span>
      {% if page_obj.has_next %}
        <a class="btn" href="?page={{ page_obj.next_page_number }}">Weiter</a>
      {% endif %}
    </nav>
  {% endif %}
</section>
{% endblock %}
