{% extends "portfolio/base.html" %}
{% load static %}
{% block title %}{{ project.title }} Â· Portfolio{% endblock %}

{% block content %}
<article class="section">
  <header class="section-head">
    <p class="eyebrow">
      {% if project.featured %}Featured Project{% else %}Project{% endif %}
    </p>
    <h1>{{ project.title }}</h1>
    <p class="muted">{{ project.short_description }}</p>
  </header>

  <div class="detail">
    <!-- LEFT: MAIN CONTENT -->
    <section class="card glass">
      <div class="detail-media">
        {% if project.cover_image %}
          <img src="{{ project.cover_image.url }}" alt="{{ project.title }}">
        {% else %}
          <img src="{% static 'img/placeholder.png' %}" alt="{{ project.title }}">
        {% endif %}
      </div>

      <h2 class="card-title card-space-top">Beschreibung</h2>
      <div class="prose">{{ project.description|linebreaksbr }}</div>
    </section>

    <!-- RIGHT: INFO CARD -->
    <aside class="card glass info-card">
      <div class="info-head">
        <h2 class="card-title info-title">Infos</h2>

        <div class="info-actions">
          {% if project.repo_url %}
            <a class="btn btn-sm btn-gitlab"
               href="{{ project.repo_url }}"
               target="_blank"
               rel="noopener">GitLab</a>
          {% endif %}

          {% if project.live_url %}
            <a class="btn btn-sm primary"
               href="{{ project.live_url }}"
               target="_blank"
               rel="noopener">Live</a>
          {% endif %}

          <a class="btn btn-sm" href="{% url 'projects' %}">Zur Liste</a>
        </div>
      </div>

      <div class="info-blocks">
        <div class="info-block">
          <div class="info-label">Status</div>
          <div class="info-chips">
            {% if project.featured %}
              <span class="tag good">Featured</span>
            {% endif %}
          </div>
        </div>

        {% if project.tech_stack %}
          <div class="info-block">
            <div class="info-label">Stack</div>
            <div class="info-chips">
              <span class="tag blue">{{ project.tech_stack }}</span>
            </div>
          </div>
        {% endif %}

        {% with skill_list=project.skills.all %}
          {% if skill_list %}
            <div class="info-block">
              <div class="info-label">Skills</div>
              <div class="info-chips">
                {% for skill in skill_list %}
                  <span class="tag">{{ skill }}</span>
                {% endfor %}
              </div>
            </div>
          {% endif %}
        {% endwith %}
      </div>
    </aside>
  </div>
</article>
{% endblock %}
